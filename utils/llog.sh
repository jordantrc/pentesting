#!/usr/bin/env bash
#
# llog.sh
#
# Logs a message to a file with a timestamp. Utilizes the
# LLOG_FILE environment variable. If this is unset,
# logs to a file in the local directory. Either way,
# the log file is always appended to. Timestamp is in
# UTC.
#
# Usage: llog <message>
#

# check if user provided a message
if [ "$#" -lt 1 ]; then
    echo "[-] no message provided"
    echo "Usage: llog <message>"
    exit 1
fi

# check if LLOG_FILE environment variable is set
if [[ -z "${LLOG_FILE}" ]]; then
    echo "[-] LLOG_FILE environment variable unset, logging to LLOG.LOG"
    log_file='LLOG.LOG'
else
    log_file=${LLOG_FILE}
fi

timestamp=$(date -u +"%Y-%m-%d %H:%M:%S")
log_string="["$timestamp"] $@"
echo ${log_string} >> $log_file